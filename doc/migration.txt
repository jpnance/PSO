Spreadsheet Migration Steps
===========================

Player Resolution
-----------------
Steps 4, 7, 8, and 9 use data/scripts/player-resolutions.json to map player names
to Sleeper IDs (or mark them as historical players). This file is tracked in
git and contains cached resolutions from previous runs. Interactive prompts
only appear for names not already resolved.

If you need to rebuild the resolutions file from scratch:
   docker compose run --rm web node data/scripts/extractPlayerResolutions.js

This extracts existing Player documents and auto-detects ambiguous names from
Sleeper data (e.g., "Mike Williams", "Chris Johnson").


Migration Steps
---------------
0. Fetch fresh Sleeper data (step 3 reads from the cached file):
   make sleeper

1. Seed league config
   docker compose run --rm web node data/scripts/seedLeagueConfig.js
   
   (Creates the LeagueConfig document for the current season. Set dates via /admin.)

2. Seed franchises, people, regimes:
   docker compose run --rm web node data/scripts/seedEntities.js --clear

3. Seed players from Sleeper:
   docker compose run --rm web node data/scripts/seedPlayers.js --clear

4. Seed contracts from spreadsheet:
   docker compose run --rm -it web node data/scripts/seedContracts.js --clear
   
   (Interactive - prompts for ambiguous player names not in player-resolutions.json)

5. Seed budgets from spreadsheet:
   docker compose run --rm web node data/scripts/seedBudgets.js --clear

6. Seed picks from spreadsheet:
   docker compose run --rm web node data/scripts/seedPicks.js --clear

7. Seed trades from WordPress:
   docker compose run --rm -it web node data/scripts/seedTrades.js --clear
   
   (Interactive - requires network for WordPress API, prompts for unresolved players)

8. Seed draft selections from Google Sheets:
   docker compose run --rm -it web node data/scripts/seedDraftSelections.js --clear
   
   (Interactive - requires network for Google Sheets API, prompts for unresolved players)

9. Seed cuts from spreadsheet:
   docker compose run --rm -it web node data/scripts/seedCuts.js --clear --auto-historical-before=2016
   
   (Interactive - requires network for Google Sheets API, prompts for 2016+ unresolved players,
   auto-creates historical players for pre-2016 cuts. Creates fa-cut transactions with dead money.)

After running interactive scripts, commit any changes to player-resolutions.json
so future runs don't re-prompt for the same players.


Future Work
-----------
- Schedule page: Public-facing page showing key league dates (cut day, auction,
  trade deadline, etc.) with indicators for tentative dates.

- 2012 Expansion Draft: The league expanded from 10 to 12 franchises in 2012.
  Quinn and Mitch joined via an expansion draft where they selected existing
  players under contract and RFA rights. This data exists in the "Past Drafts"
  spreadsheet ("2012 Expansion" tab) but isn't imported by seedPicks.js since
  it's not a standard rookie draft. Consider preserving as static history.

- Historical spreadsheet snapshots: Google Sheets revision history could be
  downloaded via Drive API and parsed to reconstruct historical state at
  specific points in time. Complex and may not be worth the effort.

- Fix trades #600 and #688: Cash was entered into the wrong year in the
  spreadsheet. Need to update these trades in the database to match the
  spreadsheet (which is canonical), and add notes explaining the discrepancy.