include mixins.pug

doctype html
html
	head
		title All-Time Results

		link(type='text/css' rel='stylesheet' href='/history.css')

	body
		each leader in leaders
			div.leaders
				h4 #{leader.description}
				table
					each value, franchise in leader.franchises
						tr
							td.franchise #{franchise}
							td.value #{value}

		each season, year in history
			table.results
				tr
					th #{year}
					each games, week in season
						th Week #{week}

					th.average Average
					th.stdev St. Dev.

				each owner, franchise in owners[year]
					tr
						th #{owner}

						each games, week in season
							td
								if games[franchise].franchise.score
									div.score #{games[franchise].franchise.score.toFixed(2)}
									div.record
										+record(games[franchise].franchise.record.straight.cumulative)
									div.all-play-record
										+record(games[franchise].franchise.record.allPlay.cumulative)
									div.stern-record
										+record(games[franchise].franchise.record.stern.cumulative)
								div.opponent #{games[franchise].opponent.name}

						td.average
							div.score #{stats[year].franchises[franchise].average.toFixed(2)}
						td.stdev
							div.score #{stats[year].franchises[franchise].stdev.toFixed(2)}

				tr
					th.average Average

					each week, i in stats[year].weeks
						if i > 0
							td.average
								if week.average
									div.score #{week.average.toFixed(2)}

					td.average
						div.score #{stats[year].total.average.toFixed(2)}

					td.average

				tr
					th.stdev St. Dev.

					each week, i in stats[year].weeks
						if i > 0
							td.stdev
								if week.stdev
									div.score #{week.stdev.toFixed(2)}

					td.stdev

					td.stdev
						div.score #{stats[year].total.stdev.toFixed(2)}
